###
Piece shapes based on SVGs from
https://commons.wikimedia.org/wiki/Standard_chess_diagram
authored by Cburnett (Colin M.L. Burnett)
licensed under BSD license (among other licenses)
###

size = 45

colors =
  light:
    light: true
    fill: '#fff'
    stroke: '#000'
  dark:
    dark: true
    fill: '#000'
    stroke: '#fff'
  graph:
    light: true
    #fill: '#df75ff'
    #fill: '#c12ded'
    fill: 'hsl(286,65%,60%)'
    stroke: '#000'
  special:
    dark: false
    #fill: '#77009c'
    fill: 'hsl(99,66%,40%)' #'#3f821b'
    #fill: '#244f0d'
    stroke: '#000'
  vertex:
    dark: false
    fill: 'hsl(185,66%,25%)'
    stroke: '#000'

pieces =
  b: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_bdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_bll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4">
      <path fill={color.fill} stroke="#000" stroke-linecap="butt"
        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />
      <path
        d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"
        fill="none" stroke={color.stroke} stroke-linejoin="miter" />
    </g>
  k: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_kdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_kll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4">
      <path
        d="M 22.5,11.63 L 22.5,6 M 20,8 L 25,8"
        fill="none" stroke="#000" stroke-linejoin="miter" />
      <path
        d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"
        fill={color.fill} stroke="#000"
        stroke-linecap="butt" stroke-linejoin="miter" />
      <path
        d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z"
        fill={color.fill} stroke="#000" />
      {if color.dark
        <path
          d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"
          fill="none" stroke={color.stroke} />
      }
      <path
        d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"
        fill="none" stroke={color.stroke} />
    </g>
  n: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_ndl45.svg and https://commons.wikimedia.org/wiki/File:Chess_nll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4">
      <path
        d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"
        fill={color.fill} stroke="#000" />
      <path
        d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"
        fill={color.fill} stroke="#000" />
      <path
        d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"
        fill={color.stroke} stroke={color.stroke} />
      <path
        d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"
        transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"
        fill={color.stroke} stroke={color.stroke} />
      {if color.dark
        <path
          d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "
          fill={color.stroke} stroke="none" />
      }
    </g>
  g: (color) ->
    <g  fill-rule="evenodd" stroke-width="1.5"
      stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4"
      transform="translate(20, 22) scale(0.02) translate(-960, -960)">
      <path
        d="M0 0 C6.69838173 5.74491839 10.60580043 13.33331042 12 22 C12.08765897 24.70752863 12.12652221 27.38813701 12.11352539 30.0949707 C12.11367142 30.89549362 12.11381744 31.69601654 12.1139679 32.52079773 C12.11327355 35.1558202 12.10550356 37.79077119 12.09765625 40.42578125 C12.09579037 42.25709494 12.09436727 44.08840914 12.09336853 45.91972351 C12.08955672 50.73163235 12.07973785 55.54351084 12.06866455 60.35540771 C12.05842169 65.26883534 12.05386475 70.18226789 12.04882812 75.09570312 C12.03811437 84.73048206 12.02105401 94.3652385 12 104 C12.86165771 103.98952637 13.72331543 103.97905273 14.61108398 103.96826172 C17.84837839 103.933908 21.08557897 103.90896987 24.32299805 103.89013672 C25.71658409 103.8801607 27.11014966 103.86657499 28.50366211 103.84912109 C40.72918104 103.6999759 50.99846237 104.2467419 61 112 C69.22805295 120.35155094 71.23371981 127.74128049 71.32983398 139.18969727 C71.26387154 143.74332332 70.49921157 146.50236529 69 151 C77.91 151 86.82 151 96 151 C95.97905273 148.51299561 95.95810547 146.02599121 95.93652344 143.46362305 C95.87001495 135.21355672 95.82596974 126.96347803 95.79275131 118.71321392 C95.7719452 113.71483272 95.74375605 108.71672799 95.69824219 103.71850586 C95.65453429 98.88795597 95.63081052 94.05767074 95.62049103 89.22693825 C95.61314419 87.39107922 95.59879833 85.5552334 95.57707977 83.71948814 C95.41610954 69.53971291 96.30160865 58.77106783 106.63671875 48.09765625 C112.822611 42.60703784 120.19173322 40.45361007 128.3125 39.6875 C137.28146011 40.44758136 144.36798309 42.83441065 151 49 C151.55558594 49.51433594 152.11117187 50.02867188 152.68359375 50.55859375 C162.33130384 60.59124988 161.54376479 73.50518913 161.390625 86.44921875 C161.38315125 88.31679169 161.37746368 90.18437255 161.37347412 92.05195618 C161.35830701 96.93303633 161.31910364 101.81362942 161.2746582 106.69451904 C161.23351146 111.68885716 161.21542193 116.68327509 161.1953125 121.67773438 C161.1525995 131.45203522 161.08445818 141.22597688 161 151 C161.87100342 150.97905273 162.74200684 150.95810547 163.6394043 150.93652344 C166.93655415 150.86749148 170.23291338 150.81779311 173.53051758 150.78027344 C174.945356 150.76041606 176.36011531 150.73332034 177.7746582 150.69824219 C188.59777377 150.43698132 198.88836979 151.17033302 208.31640625 157.078125 C216.49694205 164.98834744 220.39653903 172.51708392 221.3125 183.875 C221.02480575 192.52275074 217.71656426 200.54195669 212 207 C204.28956816 213.66710608 197.11374274 216.3452778 186.87890625 216.1953125 C186.2175769 216.19329834 185.55624756 216.19128418 184.87487793 216.18920898 C182.43734664 216.17885497 179.99991532 216.15093361 177.5625 216.125 C172.096875 216.08375 166.63125 216.0425 161 216 C161 234.15 161 252.3 161 271 C165.62 271.33 170.24 271.66 175 272 C177.87624372 272.29012333 180.74057999 272.59259549 183.609375 272.9375 C185.12238208 273.11209843 186.63540337 273.28657372 188.1484375 273.4609375 C190.44262056 273.72883573 192.73658475 273.99840856 195.03027344 274.27050781 C200.34885454 274.89850687 205.67064346 275.47144206 211 276 C211.79030609 276.08268127 212.58061218 276.16536255 213.39486694 276.25054932 C222.68263846 277.18345363 230.52428843 277.87457654 238.8125 272.875 C239.62887939 272.42487549 240.44525879 271.97475098 241.28637695 271.51098633 C243.8878044 270.05391956 246.44352266 268.53436785 249 267 C249.87624023 266.49033691 250.75248047 265.98067383 251.65527344 265.45556641 C264.13529054 258.18805918 275.79559568 250.10430268 287 241 C287.58716797 240.52320801 288.17433594 240.04641602 288.77929688 239.55517578 C297.15701394 232.7008981 305.08643685 225.37939112 313 218 C344.62778748 188.52539018 376.69232772 177.38256159 419.91772461 178.90100098 C470.05162426 181.28455078 534.37828452 196.79071846 579 220 C580.63582031 220.82177734 580.63582031 220.82177734 582.3046875 221.66015625 C598.21622706 230.2232367 609.33249885 243.20965568 615.1171875 260.30078125 C617.88731194 271.90833809 616.5177168 284.04750893 612 295 C611.4740625 296.28583984 611.4740625 296.28583984 610.9375 297.59765625 C602.03950899 317.09290738 584.00902929 332.5886118 567 345 C566.01773437 345.72485596 566.01773437 345.72485596 565.015625 346.46435547 C552.20057869 355.91003222 539.09073452 364.94289445 526 374 C524.54938959 375.00507906 523.09885918 376.01027361 521.6484375 377.015625 C518.76696876 379.0123632 515.88413948 381.00712052 513 383 C515.22278741 387.1677264 517.64826781 390.92083706 520.5 394.6875 C575.55905256 469.62898821 596.34984258 571.96675757 625.14043236 716.13706398 C625.58477546 718.58951539 626.03021441 721.04176618 626.47573853 723.4940033 C633.69578087 763.27266613 640.31946156 803.14853925 646.91927338 843.03383636 C649.01199462 855.6799928 651.10947239 868.3253434 653.21875 880.96875 C653.35634979 881.79376141 653.49394958 882.61877282 653.63571906 883.46878457 C658.05832449 909.96874031 662.70194474 936.42450876 667.51953125 962.85546875 C667.66573221 963.65813738 667.81193317 964.46080601 667.96256447 965.28779793 C675.94586942 1009.09961665 684.68894175 1052.6707301 695 1096 C695.19638062 1096.82912903 695.39276123 1097.65825806 695.59509277 1098.51251221 C715.35082025 1181.8934892 741.42221426 1274.42896471 805 1343 C805.65484375 1343.70898438 806.3096875 1344.41796875 806.984375 1345.1484375 C821.42806639 1360.27110584 839.53268852 1370.00396236 858.13183594 1379.03515625 C858.83211914 1379.37933594 859.53240234 1379.72351562 860.25390625 1380.078125 C860.88498291 1380.3865332 861.51605957 1380.69494141 862.16625977 1381.01269531 C870.4349318 1385.46463376 874.87412658 1392.96904506 877.56453967 1401.86711633 C878.05575624 1404.27309394 878.12787549 1406.47469167 878.13142776 1408.93082619 C878.13526891 1409.92887453 878.13911005 1410.92692287 878.1430676 1411.9552151 C878.14220112 1413.04955375 878.14133463 1414.1438924 878.14044189 1415.27139282 C878.14489858 1417.01777985 878.14489858 1417.01777985 878.1494453 1418.79944742 C878.15662472 1422.03196251 878.15930455 1425.26444522 878.16004276 1428.49696708 C878.16189436 1431.98315256 878.16944231 1435.46932654 878.17617798 1438.95550537 C878.18975859 1446.57966215 878.19578583 1454.20381366 878.20018864 1461.82798052 C878.20295198 1466.59004738 878.20718955 1471.35211221 878.21169281 1476.1141777 C878.22388599 1489.30268794 878.23418464 1502.49119655 878.2375679 1515.6797123 C878.23778747 1516.52379301 878.23800703 1517.36787372 878.23823325 1518.23753264 C878.23845153 1519.08362077 878.23866981 1519.9297089 878.2388947 1520.80143607 C878.23933817 1522.51589878 878.23978473 1524.2303615 878.24023438 1525.94482422 C878.2404558 1526.79525493 878.24067723 1527.64568565 878.24090537 1528.52188699 C878.24485151 1542.29506939 878.26229966 1556.06819882 878.2855939 1569.84136076 C878.30932469 1583.98703302 878.32177057 1598.13267873 878.32293582 1612.27837121 C878.3238517 1620.21858566 878.32958197 1628.15873113 878.34775543 1636.09892654 C878.36317987 1642.86184281 878.36826316 1649.62466878 878.36001733 1656.3875993 C878.35611885 1659.83593776 878.35700081 1663.2840945 878.37107468 1666.73241043 C878.38378198 1670.47733122 878.37792327 1674.22178763 878.36749268 1677.96670532 C878.37554908 1679.04765964 878.38360548 1680.12861396 878.39190602 1681.24232447 C878.32398439 1691.69049297 876.03054536 1701.0218594 869 1709 C861.32196736 1715.51210917 853.14146775 1718.46596047 843.19080639 1718.38031673 C842.33561923 1718.38497665 841.48043208 1718.38963657 840.59933016 1718.3944377 C837.73811572 1718.4063739 834.87737734 1718.39699751 832.01615906 1718.38768005 C829.94231672 1718.39185357 827.86847666 1718.39733118 825.79464084 1718.40399987 C820.09891529 1718.41847091 814.40333423 1718.41420449 808.70760071 1718.40683305 C802.56362871 1718.40210778 796.41968825 1718.41460561 790.27572632 1718.42485046 C778.93573093 1718.44106216 767.59579376 1718.44348107 756.25579344 1718.43854547 C745.77777518 1718.43398734 735.29977407 1718.43458866 724.82175636 1718.44038582 C723.41595148 1718.44114269 722.0101466 1718.44189867 720.60434172 1718.44265376 C718.48587803 1718.44379897 716.36741435 1718.44494884 714.24895068 1718.44611301 C694.5538706 1718.45681765 674.85879623 1718.46154369 655.16371441 1718.45364285 C654.05015464 1718.45319709 654.05015464 1718.45319709 652.91409871 1718.45274232 C646.88561946 1718.45029342 640.85714028 1718.44768181 634.8286611 1718.44505819 C611.31746894 1718.43495735 587.80634821 1718.44330819 564.29516602 1718.46655273 C537.87449653 1718.49263156 511.45387005 1718.50547149 485.03318721 1718.49836498 C482.21535513 1718.49764893 479.39752303 1718.49697455 476.57969093 1718.49632454 C475.8858799 1718.49615473 475.19206886 1718.49598492 474.47723325 1718.49580997 C464.0088251 1718.49350802 453.54045691 1718.50147905 443.07205772 1718.51461601 C431.16434311 1718.52953264 419.25672534 1718.52998918 407.34900459 1718.5125451 C401.27374925 1718.50402265 395.19867254 1718.50191614 389.12342644 1718.51719666 C383.56006481 1718.5310164 377.99703531 1718.52631515 372.43369303 1718.50695742 C370.42298357 1718.50318879 368.41224767 1718.50614415 366.4015617 1718.51656907 C352.788249 1718.58212188 341.3172033 1718.2001691 330.9453125 1708.29296875 C326.20226699 1702.70227052 322.91775431 1695.75640683 322.817276 1688.38929749 C322.8019687 1687.44024221 322.7866614 1686.49118694 322.77089024 1685.51337242 C322.75892077 1684.47134478 322.74695131 1683.42931713 322.73461914 1682.35571289 C322.71813041 1681.25368341 322.70164167 1680.15165394 322.68465328 1679.01622963 C322.63051763 1675.33508671 322.58296704 1671.65388629 322.53515625 1667.97265625 C322.49783807 1665.38197584 322.45998651 1662.79130307 322.42163086 1660.20063782 C322.34034093 1654.68845634 322.26168044 1649.17624332 322.18460083 1643.66400146 C321.98391962 1629.36298205 321.75898768 1615.06232936 321.53125 1600.76171875 C321.52008313 1600.05861478 321.50891627 1599.35551081 321.49741101 1598.63110065 C320.97970584 1566.07509559 320.25488587 1533.53698896 319 1501 C318.96207211 1500.01253407 318.96207211 1500.01253407 318.92337799 1499.00511932 C314.92766928 1395.19568086 307.90917077 1290.98576611 257 1050 C256.60699707 1048.80181641 256.21399414 1047.60363281 255.80908203 1046.36914062 C233.46999223 978.76660687 198.30203406 920.78106831 159 862 C158.21157715 862.78914795 157.4231543 863.5782959 156.61083984 864.39135742 C155.15501385 865.8459582 153.69627069 867.29770825 152.2265625 868.73828125 C149.19322089 871.7198341 146.3160991 874.75715095 143.5625 878 C140.01924381 882.09077923 136.1355508 885.52253517 132 889 C131.07574219 889.81210937 130.15148437 890.62421875 129.19921875 891.4609375 C111.66095267 906.79084683 92.00339431 919.0668892 70.99072266 929.04980469 C69.69945242 929.66614314 68.41233938 930.29129795 67.13037109 930.92675781 C8.31305881 960.0357177 -61.38694158 966.38169106 -126 970 C-126.90391479 970.05091797 -127.80782959 970.10183594 -128.73913574 970.15429688 C-135.5323962 970.52924857 -142.32725123 970.84359512 -149.125 971.125 C-150.16334991 971.16892883 -151.20169983 971.21285767 -152.27151489 971.25811768 C-169.076016 971.93483015 -185.85600401 972.03595513 -202.67208099 971.99795151 C-206.19630567 971.99217948 -209.7204628 971.99299397 -213.24468994 971.99636841 C-214.4171804 971.99746801 -215.58967087 971.99856762 -216.79769135 971.99970055 C-219.18022447 972.00218351 -221.56275728 972.00500384 -223.94528961 972.00815773 C-231.07085523 972.01317306 -238.19431459 971.97107559 -245.31946278 971.8962574 C-249.83163111 971.85911352 -254.34312159 971.86352757 -258.85539055 971.87805557 C-260.97727485 971.87604131 -263.09922493 971.8565378 -265.22076607 971.81832504 C-278.05411259 971.21453084 -278.05411259 971.21453084 -289.24300098 976.51317596 C-291.32384869 978.54682735 -293.16457939 980.74521302 -295 983 C-296.14705458 984.01344032 -297.32313702 984.99609275 -298.5390625 985.92578125 C-299.55742188 986.71339844 -300.57578125 987.50101563 -301.625 988.3125 C-303.4492016 989.72298339 -305.27427597 991.1321866 -307.10351562 992.53613281 C-309.0231476 994.01786728 -310.92641194 995.51879597 -312.828125 997.0234375 C-329.24729857 1009.91876052 -346.7385207 1021.85150275 -365 1032 C-365.86044922 1032.48001465 -366.72089844 1032.9600293 -367.60742188 1033.45458984 C-417.42867409 1060.96112981 -475.5176014 1076.87248339 -531.8125 1061.25 C-556.23396974 1054.05268409 -577.52409103 1041.49567586 -596 1024 C-597.23363281 1022.84564453 -597.23363281 1022.84564453 -598.4921875 1021.66796875 C-626.85628081 994.32003454 -643.16580279 954.21875962 -644.03125 915.03515625 C-644.16266306 872.99119091 -624.26579288 838.60567253 -598 807 C-597.22406494 806.05640625 -596.44812988 805.1128125 -595.64868164 804.140625 C-589.46600535 796.68153097 -582.9703142 789.65467384 -576.09326172 782.83251953 C-574.49337171 781.2434164 -572.90455586 779.64379625 -571.31640625 778.04296875 C-564.86551942 771.58338541 -558.16195838 765.67548748 -551 760 C-549.70601915 758.92752534 -548.41526276 757.85113898 -547.12890625 756.76953125 C-522.94987814 736.63872698 -495.85790694 720.24170045 -469.06591797 703.87402344 C-434.80223588 683.03146993 -434.80223588 683.03146993 -402 660 C-401.38125 659.53287598 -400.7625 659.06575195 -400.125 658.58447266 C-381.72260404 644.59924663 -364.20252086 629.31994893 -350 611 C-349.22527344 610.04222656 -348.45054687 609.08445312 -347.65234375 608.09765625 C-345.48894626 605.37883817 -343.41224192 602.62419782 -341.36523438 599.81835938 C-340.45011433 598.59950851 -339.50524517 597.4024732 -338.53320312 596.22851562 C-326.37866348 581.50853905 -324.1093117 563.80464724 -320.537323 545.61422729 C-307.851101 481.40169537 -281.68870484 415.55443851 -241 364 C-240.29875 363.10667969 -239.5975 362.21335937 -238.875 361.29296875 C-225.9439863 345.15229272 -211.35586373 329.6798659 -195 317 C-194.04222656 316.22527344 -193.08445312 315.45054687 -192.09765625 314.65234375 C-152.87152237 283.43961931 -102.74431109 263.97443111 -53 259 C-53 229.3 -53 199.6 -53 169 C-67.19 169 -81.38 169 -96 169 C-107.04630927 164.58147629 -113.7012283 161.58153503 -119 151 C-122.32111754 142.14771216 -123.12958141 133.84533379 -119.8671875 124.890625 C-115.51251565 115.32462455 -109.81674558 109.78035006 -100.17578125 105.7265625 C-94.68831916 103.89412453 -89.48640509 103.86754787 -83.76171875 103.90234375 C-82.88095169 103.9037587 -82.00018463 103.90517365 -81.09272766 103.90663147 C-78.29094997 103.91221063 -75.48925338 103.92475929 -72.6875 103.9375 C-70.78320428 103.94251769 -68.87890731 103.94708013 -66.97460938 103.95117188 C-62.31637519 103.96217323 -57.65820133 103.97942351 -53 104 C-53.00888245 102.94257095 -53.01776489 101.88514191 -53.0269165 100.79566956 C-53.10817774 90.80627149 -53.16804944 80.81694093 -53.20724869 70.82728672 C-53.2280793 65.69209018 -53.25631405 60.55716153 -53.30175781 55.42211914 C-53.34537723 50.46190208 -53.36917112 45.50194191 -53.37950897 40.54154778 C-53.38687151 38.65379737 -53.40124868 36.76606024 -53.42292023 34.87841988 C-53.62348637 16.67658735 -53.62348637 16.67658735 -49 9 C-48.55398438 8.20207031 -48.10796875 7.40414062 -47.6484375 6.58203125 C-42.51665836 -0.54893792 -35.13282493 -5.35095629 -26.40234375 -6.80859375 C-16.41393877 -7.60441789 -8.37542194 -5.57553414 0 0 Z M12 169 C12 197.38 12 225.76 12 255 C15.9009269 255.97523173 19.49605358 256.24767657 23.48046875 256.39453125 C25.03445029 256.46113672 26.58840428 256.52838728 28.14233398 256.59619141 C28.96418182 256.6310968 29.78602966 256.6660022 30.63278198 256.70196533 C52.52957425 257.64937113 74.19546759 259.73655373 96 262 C96 246.82 96 231.64 96 216 C82.29927702 215.82986439 82.29927702 215.82986439 68.59814453 215.70214844 C66.85967423 215.67273912 65.12122718 215.64190634 63.3828125 215.609375 C62.5055249 215.60824707 61.6282373 215.60711914 60.72436523 215.60595703 C51.45787678 215.39529663 43.57106197 212.44221788 36.7578125 206.0703125 C31.39942947 199.75932804 28.85666754 192.48349567 28.8125 184.3125 C28.79832031 183.13300781 28.78414062 181.95351562 28.76953125 180.73828125 C29 177 29 177 31 169 C24.73 169 18.46 169 12 169 Z "
        fill={color.fill}
        stroke={"#000"}
        stroke-width={50}
        transform="translate(840,68)" />
      <path d="M0 0 C28.4863948 22.63799207 43.81731562 54.92183498 50.25 90.25 C50.38132324 90.9704248 50.51264648 91.69084961 50.64794922 92.43310547 C57.69500699 133.55906253 48.89340744 178.18304445 26.25 213.25 C23.75980541 216.7602166 21.09278545 220.02156536 18.25 223.25 C17.56421875 224.06726562 16.8784375 224.88453125 16.171875 225.7265625 C2.49040638 241.62265733 -16.66021167 254.90981253 -37.75 258.25 C-38.41902344 258.36085938 -39.08804687 258.47171875 -39.77734375 258.5859375 C-65.04011988 262.06721391 -88.34737259 255.22488749 -108.75 240.25 C-138.2075132 217.2270295 -154.04964722 179.58014887 -158.75 143.25 C-163.50259947 101.64875262 -155.56180956 55.39057766 -128.9609375 21.8828125 C-114.79477908 5.01357085 -99.71954876 -7.67702788 -78.75 -14.75 C-77.77417969 -15.0903125 -76.79835938 -15.430625 -75.79296875 -15.78125 C-49.79491116 -23.29876063 -21.18171129 -16.07580405 0 0 Z "
          fill={color.stroke} transform="translate(1562.75,1436.75)"/>
      <path d="M0 0 C25.19382119 21.83681785 39.62245239 51.21102658 46.01953125 83.6171875 C46.1705127 84.35710937 46.32149414 85.09703125 46.47705078 85.859375 C54.86959096 128.30190831 46.1952441 174.26537495 22.58447266 210.52880859 C8.12081606 231.96349356 -13.1732211 249.99293954 -39.1015625 255.25 C-64.64446646 259.04081967 -88.69009938 254.79398169 -109.68798828 239.36230469 C-132.16766926 221.99486547 -146.09538958 198.24081572 -154.98046875 171.6171875 C-155.3043457 170.65868896 -155.62822266 169.70019043 -155.96191406 168.71264648 C-158.49977725 160.88953567 -160.13504538 153.20024442 -161.23046875 145.0546875 C-161.39812744 143.80888916 -161.56578613 142.56309082 -161.73852539 141.27954102 C-166.0277918 106.614331 -161.48955652 73.00332221 -145.98046875 41.6171875 C-145.43777344 40.48152344 -144.89507813 39.34585937 -144.3359375 38.17578125 C-131.51225484 12.74682416 -110.26149502 -7.43337878 -83.35546875 -17.1953125 C-81.90552181 -17.62084041 -80.4464501 -18.01631716 -78.98046875 -18.3828125 C-78.18640625 -18.58648438 -77.39234375 -18.79015625 -76.57421875 -19 C-48.98970683 -24.78640624 -21.60698432 -17.87048883 0 0 Z "
            fill={color.stroke} transform="translate(1403.98046875,1183.3828125)"/>
      <path d="M0 0 C2.40601874 1.89175519 4.70785842 3.85506863 6.99609375 5.88671875 C7.67671875 6.43714844 8.35734375 6.98757813 9.05859375 7.5546875 C37.11849188 30.62737718 50.34160274 69.97193316 53.99609375 104.88671875 C55.03169791 119.98427932 54.39652618 134.94912354 51.99609375 149.88671875 C51.80226883 151.31199896 51.61146489 152.73769882 51.42578125 154.1640625 C47.42125437 180.58829975 35.60532659 208.18994762 17.0390625 227.703125 C14.94782032 229.8663892 14.94782032 229.8663892 13.12109375 232.3359375 C0.79212628 247.13523118 -20.10390771 257.44182975 -39.00390625 259.88671875 C-65.61224463 262.12737948 -86.9918733 256.93581451 -108.03515625 240.41796875 C-131.80177331 220.15380052 -147.36614356 192.37760286 -154.00390625 161.88671875 C-154.23255371 160.85417969 -154.23255371 160.85417969 -154.46582031 159.80078125 C-159.54537034 135.48915519 -159.68599062 106.09341381 -154.00390625 81.88671875 C-153.76244873 80.79568848 -153.76244873 80.79568848 -153.51611328 79.68261719 C-148.16743007 56.09908602 -137.24717093 33.85516677 -121.00390625 15.88671875 C-120.56884766 15.40251465 -120.13378906 14.91831055 -119.68554688 14.41943359 C-108.83166784 2.49777167 -96.04109993 -6.20910704 -81.00390625 -12.11328125 C-80.04613281 -12.52578125 -79.08835937 -12.93828125 -78.1015625 -13.36328125 C-52.10232435 -22.80562751 -21.95713072 -15.44708416 0 0 Z "
            fill={color.stroke} transform="translate(1305.00390625,838.11328125)"/>
      <path d="M0 0 C12.418785 -0.49611126 22.50327343 3.98589392 31.59375 12.30859375 C42.10498885 23.13943108 46.86542677 36.81287523 50.28125 51.19140625 C50.44641113 51.86606934 50.61157227 52.54073242 50.78173828 53.23583984 C58.29587131 85.53806427 55.35158177 127.34843188 38.28125 156.19140625 C32.75952992 164.86839494 24.87814318 171.35264898 15.28125 175.19140625 C2.30579214 177.39628234 -8.59357827 177.8508417 -19.71875 170.19140625 C-37.55813008 156.9466291 -44.18350328 135.30639977 -47.34765625 114.109375 C-48.02291363 108.79971962 -48.48803709 103.54072652 -48.71875 98.19140625 C-48.75274902 97.40427246 -48.78674805 96.61713867 -48.82177734 95.80615234 C-49.72248946 71.43205946 -47.99873948 42.00417684 -33.71875 21.19140625 C-33.20699219 20.43730469 -32.69523438 19.68320312 -32.16796875 18.90625 C-25.84260847 10.19615619 -17.13199484 2.90215506 -6.46875 0.44140625 C-4.31227267 0.29764109 -2.15592788 0.15178228 0 0 Z "
            fill={color.stroke} transform="translate(677.71875,522.80859375)"/>
    </g>
  c: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_ndl45.svg and https://commons.wikimedia.org/wiki/File:Chess_nll45.svg by Cburnett
    <g  fill-rule="evenodd"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="miter"
        stroke-miterlimit="4"
        transform = "translate(-3,1) scale(0.05)">
    <path d="M0 0 C-3.54232072 40.07277889 -8.34339667 91.30368641 -31.13793945 125.71801758 C-33.22036207 128.89222148 -34.0369361 130.59089765 -33.69140625 134.41796875 C-33.13259766 136.28388672 -33.13259766 136.28388672 -32.5625 138.1875 C-32.15239329 139.68148443 -31.75066519 141.17778366 -31.35546875 142.67578125 C-31.1342334 143.50932129 -30.91299805 144.34286133 -30.68505859 145.20166016 C-26.70690448 161.45169665 -24.22229719 178.31939292 -23 195 C-22.91069654 196.00482548 -22.82139309 197.00965096 -22.72938347 198.04492569 C-21.67438335 211.97976322 -22.09788385 225.90979517 -22.38212395 239.86646843 C-22.5515506 248.20001789 -22.6931818 256.53408294 -22.83718872 264.86810303 C-22.85260638 265.74962471 -22.86802404 266.63114639 -22.8839089 267.53938085 C-23.12628192 281.46478751 -23.30636278 295.39010734 -23.44137573 309.31695557 C-23.45058151 310.26332436 -23.45978729 311.20969316 -23.46927203 312.1847398 C-23.5634105 321.95713056 -23.64977946 331.72957587 -23.72990949 341.50209104 C-23.77130491 346.51003616 -23.81471997 351.51796184 -23.859375 356.52587891 C-23.86822924 357.52247679 -23.87708347 358.51907466 -23.88620602 359.54587248 C-24.03390856 375.67197273 -24.3306661 391.79209772 -24.68162932 407.91490588 C-25.03982338 424.5301606 -25.23175138 441.14157415 -25.2741679 457.76065755 C-25.30265517 467.0704846 -25.40584255 476.36650557 -25.7010231 485.67201996 C-28.67764054 523.05758758 -28.67764054 523.05758758 -16.82649994 556.87861633 C-7.40634967 566.60624716 4.39530301 572.4628823 16.73367691 577.64160919 C23.90855359 580.70915182 30.13543348 585.04188609 36.45492339 589.56698561 C39.09674232 591.43834276 41.80207688 593.20690691 44.5078125 594.984375 C48.87800783 597.87800783 48.87800783 597.87800783 50 599 C50 623.09 50 647.18 50 672 C-108.4 672 -266.8 672 -430 672 C-430 647.58 -430 623.16 -430 598 C-415.76024498 585.38138632 -408.30684143 578.84245774 -392.29699707 571.83821106 C-391.27936783 571.37907633 -390.26173859 570.9199416 -389.21327209 570.44689369 C-386.99929588 569.44996965 -384.77713186 568.47109789 -382.54856873 567.50722313 C-368.09563599 560.95515588 -368.09563599 560.95515588 -358.1324389 549.11795092 C-354.58750302 538.27931644 -355.60064964 526.10277702 -355.99891114 514.87555528 C-356.13941108 510.15359381 -356.13036559 505.43164174 -356.14030457 500.70793152 C-356.17792832 492.79118557 -356.31566363 484.88155087 -356.52368164 476.9675293 C-356.78993872 466.82072467 -356.89300191 456.67910115 -356.94402027 446.52919483 C-356.98885248 437.77365666 -357.10296602 429.01922711 -357.23086715 420.26455855 C-357.26945515 417.46255678 -357.29955288 414.66055058 -357.32889748 411.85843849 C-357.37985417 407.45652322 -357.47394527 403.05746879 -357.60121727 398.65711975 C-357.64204487 397.04616169 -357.66969304 395.43480578 -357.6829834 393.82338524 C-357.51838416 385.18215035 -357.51838416 385.18215035 -360.86847496 377.51852989 C-363.01117765 375.59169299 -363.01117765 375.59169299 -365.2969923 374.15680981 C-365.85898484 373.77506257 -366.42097738 373.39331533 -367 373 C-367 372.34 -367 371.68 -367 371 C-365.99785461 370.99120064 -365.99785461 370.99120064 -364.97546387 370.98222351 C-320.3726377 370.91973903 -320.3726377 370.91973903 -276 367 C-274.77909668 366.82984375 -273.55819336 366.6596875 -272.30029297 366.484375 C-234.22460856 360.96544572 -194.4202649 349.58797833 -164 325 C-163.3930127 324.50967285 -162.78602539 324.0193457 -162.16064453 323.51416016 C-160.26032984 321.96227704 -158.37611721 320.39353378 -156.5 318.8125 C-155.93595459 318.33748047 -155.37190918 317.86246094 -154.79077148 317.37304688 C-153.69874797 316.42700709 -152.62510429 315.45933774 -151.57080078 314.47143555 C-150 313 -150 313 -148.36279297 311.71020508 C-141.90173325 305.80592792 -142.0791769 296.25197562 -141.125 288.0625 C-140.91374128 286.40791004 -140.70022049 284.75360723 -140.484375 283.09960938 C-139.96338919 279.0692518 -139.4733541 275.03621736 -139 271 C-139.57790283 272.18843506 -139.57790283 272.18843506 -140.16748047 273.40087891 C-148.25709213 289.84348493 -159.47454674 305.58526087 -174 317 C-174.90621094 317.75410156 -175.81242187 318.50820313 -176.74609375 319.28515625 C-215.69777058 351.11784168 -271.31582317 360.06222131 -320.17700195 360.17358398 C-321.42472382 360.180271 -322.67244568 360.18695801 -323.95797729 360.19384766 C-326.64781728 360.20780778 -329.33760689 360.22015412 -332.0274601 360.22979546 C-336.31775816 360.24550312 -340.60798793 360.26945714 -344.89823914 360.29469299 C-357.0908876 360.36519845 -369.28357637 360.42505193 -381.47631836 360.47680664 C-388.22975813 360.50554586 -394.98313086 360.54115366 -401.73649949 360.58346039 C-405.28531048 360.60536986 -408.83406219 360.62407968 -412.38292885 360.63390923 C-432.33755205 360.69125293 -452.10488134 361.55890767 -472 363 C-473.34636413 363.09615195 -474.69274205 363.19211094 -476.03913307 363.28788567 C-479.35949399 363.52426698 -482.67977609 363.76170353 -486 364 C-482.92762917 360.6097977 -479.6845726 358.00661457 -475.9375 355.375 C-470.48727292 351.4935545 -465.68212568 347.19283608 -460.82421875 342.61328125 C-458.87080188 340.80576273 -456.93435998 339.10031372 -454.87890625 337.421875 C-452.43561292 335.36645863 -450.33509852 333.34301503 -448.25 330.9375 C-447.67765625 330.28652344 -447.1053125 329.63554687 -446.515625 328.96484375 C-445.03901099 327.05057353 -443.99760764 325.19571486 -443 323 C-443.99 321.515 -443.99 321.515 -445 320 C-448.80881477 321.38877362 -451.97938448 323.17017568 -455.375 325.375 C-481.70499243 341.93130549 -511.11053276 354.43715627 -542 359 C-542.6283374 359.0935376 -543.2566748 359.1870752 -543.90405273 359.28344727 C-551.46351956 360.27279438 -559.07553599 360.28333209 -566.6875 360.3125 C-567.41222504 360.31611542 -568.13695007 360.31973083 -568.88363647 360.32345581 C-583.02959858 360.35171928 -596.28264702 358.44802543 -610 355 C-615.65729176 336.22260608 -618.10267265 317.05308274 -619.6875 297.5625 C-619.74825714 296.82545837 -619.80901428 296.08841675 -619.87161255 295.32904053 C-621.6039135 273.92358009 -622.20210125 252.46638631 -622.24023438 230.99584961 C-622.25004925 227.6708167 -622.28130552 224.34637683 -622.3125 221.02148438 C-622.44345477 194.45985926 -619.72783571 166.44573324 -600.3515625 146.32421875 C-599.18753906 145.17373047 -599.18753906 145.17373047 -598 144 C-597.28585937 143.26394531 -596.57171875 142.52789062 -595.8359375 141.76953125 C-559.03438473 106.04293793 -496.56486412 97.97507264 -447.5625 96.0625 C-431.52394481 95.41884653 -416.54618679 93.17385349 -401 89 C-399.76233887 88.67612305 -398.52467773 88.35224609 -397.24951172 88.01855469 C-372.38247395 81.47192557 -348.90467184 72.05632712 -325.3605957 61.76904297 C-314.0165054 56.87828097 -302.45311566 52.61469512 -290.86535645 48.34075928 C-281.27038531 44.79830833 -271.76599632 41.22557277 -262.5 36.875 C-225.87466442 19.68989697 -180.32042359 19.72103982 -141.75732422 30.46166992 C-134.07272765 32.5407271 -128.81514299 31.62789017 -121.625 28.125 C-89.03945663 13.17111349 -53.32546429 5.78032956 -18 1 C-17.14212891 0.88366211 -16.28425781 0.76732422 -15.40039062 0.64746094 C-10.23916591 0.00732632 -5.20045205 -0.08254686 0 0 Z M-73 23 C-73.92200195 23.24508301 -74.84400391 23.49016602 -75.79394531 23.74267578 C-96.49174527 29.31000412 -111.27457877 37.8524081 -126.5 53.1875 C-127.32806152 54.02120117 -128.15612305 54.85490234 -129.00927734 55.71386719 C-141.70654642 68.66333374 -153.1528602 83.62213696 -159 101 C-157.23361856 102.48448016 -155.46173862 103.96241965 -153.6875 105.4375 C-152.70136719 106.26121094 -151.71523438 107.08492188 -150.69921875 107.93359375 C-148.11899855 110.14121576 -148.11899855 110.14121576 -145 111 C-144.5153125 109.97261719 -144.030625 108.94523437 -143.53125 107.88671875 C-137.34388501 95.00040426 -129.83783788 84.41553475 -120 74 C-119.32582031 73.26136719 -118.65164063 72.52273437 -117.95703125 71.76171875 C-107.18221979 60.38044511 -93.83437826 52.14384661 -80 45 C-79.33274902 44.65340332 -78.66549805 44.30680664 -77.97802734 43.94970703 C-63.30429385 36.43096368 -47.76139745 31.6774271 -32 27 C-39.55245903 60.32043994 -51.91553488 94.12337641 -75 120 C-75.82886719 120.97195312 -76.65773438 121.94390625 -77.51171875 122.9453125 C-89.67479067 136.97737716 -104.88557316 147.8165752 -122 155 C-120.49292219 158.36194281 -118.56248436 161.00157205 -116.1875 163.8125 C-115.52105469 164.62332031 -114.85460937 165.43414062 -114.16796875 166.26953125 C-112.16192753 168.24986689 -112.16192753 168.24986689 -109.6953125 167.94921875 C-80.63122347 157.71360479 -49.9641447 138.39683648 -35.9765625 110.09472656 C-22.5524966 81.3001052 -12.8068919 44.88249977 -14 13 C-33.60117232 12.61769168 -54.22108032 17.91417561 -73 23 Z M-357 143 C-351.99851275 153.42720779 -342.44835054 159.46354728 -332.0625 163.93359375 C-323.96361051 166.75374277 -314.60257876 169.07532235 -306 168 C-304.9275 167.86851562 -303.855 167.73703125 -302.75 167.6015625 C-288.01453831 165.23774885 -273.6038449 158.81805707 -264.26953125 146.765625 C-263.64111328 145.89164063 -263.64111328 145.89164063 -263 145 C-267.38227006 134.91164914 -277.77892099 128.63333468 -287.48828125 124.5234375 C-313.71449432 114.64695064 -338.45234198 123.00393484 -357 143 Z M-578 217 C-578.82371094 217.67804688 -579.64742187 218.35609375 -580.49609375 219.0546875 C-586.65785971 224.32548274 -591.75509069 230.06348618 -596 237 C-596 237.66 -596 238.32 -596 239 C-573.55319976 240.68001 -550.11183033 228.05027982 -533.36328125 214.0703125 C-532.19345703 213.04550781 -532.19345703 213.04550781 -531 212 C-530.14792969 211.25492188 -529.29585937 210.50984375 -528.41796875 209.7421875 C-523.27474133 205.17082861 -523.27474133 205.17082861 -520.9375 198.9375 C-520.958125 197.968125 -520.97875 196.99875 -521 196 C-536.55329601 186.17686568 -566.19743246 207.05004006 -578 217 Z M-333 540 C-333 543.63 -333 547.26 -333 551 C-238.62 551 -144.24 551 -47 551 C-47 547.37 -47 543.74 -47 540 C-141.38 540 -235.76 540 -333 540 Z M-379 598 C-379 598.33 -379 598.66 -379 599 C-254.26 599 -129.52 599 -1 599 C-2.65 597.68 -4.3 596.36 -6 595 C-6.87163042 594.28770408 -7.74326085 593.57540816 -8.64130431 592.84152752 C-26.23379747 578.74973033 -40.21554088 573.11084484 -63.14350164 573.47225416 C-66.88604078 573.50988962 -70.62691267 573.43611943 -74.36897278 573.37840271 C-81.6591755 573.28343194 -88.94574893 573.28910127 -96.2362987 573.33416783 C-102.17532214 573.36920211 -108.11331942 573.36738912 -114.0523777 573.34068489 C-114.90496883 573.33690729 -115.75755997 573.3331297 -116.6359872 573.32923763 C-118.3692994 573.32144409 -120.10261131 573.31358689 -121.83592293 573.30566681 C-138.009226 573.23632352 -154.18051779 573.28469234 -170.35361914 573.37322611 C-184.1530168 573.44577348 -197.94872845 573.41007532 -211.74780273 573.29663086 C-227.86430386 573.16414619 -243.9785306 573.10574585 -260.09556705 573.15731674 C-261.82322552 573.16261285 -263.55088433 573.16779733 -265.27854347 573.17286873 C-266.55279234 573.17663238 -266.55279234 573.17663238 -267.85278362 573.18047206 C-273.7644109 573.19287356 -279.6743208 573.15352267 -285.58560753 573.09319878 C-336.85861808 571.64547874 -336.85861808 571.64547874 -379 598 Z "
      fill={color.fill}
      transform="translate(798,93)"
      />
       {if color.dark
        <path
          d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "
          fill={color.stroke} stroke="none" />
      }
    </g>
  #camel rider
  e: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_ndl45.svg and https://commons.wikimedia.org/wiki/File:Chess_nll45.svg by Cburnett
    <g  fill-rule="evenodd"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="miter"
        stroke-miterlimit="4"
        transform = "translate(-31,35) scale(0.05)">
    <path d="M0 0 C-3.54232072 40.07277889 -8.34339667 91.30368641 -31.13793945 125.71801758 C-33.22036207 128.89222148 -34.0369361 130.59089765 -33.69140625 134.41796875 C-33.13259766 136.28388672 -33.13259766 136.28388672 -32.5625 138.1875 C-32.15239329 139.68148443 -31.75066519 141.17778366 -31.35546875 142.67578125 C-31.1342334 143.50932129 -30.91299805 144.34286133 -30.68505859 145.20166016 C-26.70690448 161.45169665 -24.22229719 178.31939292 -23 195 C-22.91069654 196.00482548 -22.82139309 197.00965096 -22.72938347 198.04492569 C-21.67438335 211.97976322 -22.09788385 225.90979517 -22.38212395 239.86646843 C-22.5515506 248.20001789 -22.6931818 256.53408294 -22.83718872 264.86810303 C-22.85260638 265.74962471 -22.86802404 266.63114639 -22.8839089 267.53938085 C-23.12628192 281.46478751 -23.30636278 295.39010734 -23.44137573 309.31695557 C-23.45058151 310.26332436 -23.45978729 311.20969316 -23.46927203 312.1847398 C-23.5634105 321.95713056 -23.64977946 331.72957587 -23.72990949 341.50209104 C-23.77130491 346.51003616 -23.81471997 351.51796184 -23.859375 356.52587891 C-23.86822924 357.52247679 -23.87708347 358.51907466 -23.88620602 359.54587248 C-24.03390856 375.67197273 -24.3306661 391.79209772 -24.68162932 407.91490588 C-25.03982338 424.5301606 -25.23175138 441.14157415 -25.2741679 457.76065755 C-25.30265517 467.0704846 -25.40584255 476.36650557 -25.7010231 485.67201996 C-28.67764054 523.05758758 -28.67764054 523.05758758 -16.82649994 556.87861633 C-7.40634967 566.60624716 4.39530301 572.4628823 16.73367691 577.64160919 C23.90855359 580.70915182 30.13543348 585.04188609 36.45492339 589.56698561 C39.09674232 591.43834276 41.80207688 593.20690691 44.5078125 594.984375 C48.87800783 597.87800783 48.87800783 597.87800783 50 599 C50 623.09 50 647.18 50 672 C-108.4 672 -266.8 672 -430 672 C-430 647.58 -430 623.16 -430 598 C-415.76024498 585.38138632 -408.30684143 578.84245774 -392.29699707 571.83821106 C-391.27936783 571.37907633 -390.26173859 570.9199416 -389.21327209 570.44689369 C-386.99929588 569.44996965 -384.77713186 568.47109789 -382.54856873 567.50722313 C-368.09563599 560.95515588 -368.09563599 560.95515588 -358.1324389 549.11795092 C-354.58750302 538.27931644 -355.60064964 526.10277702 -355.99891114 514.87555528 C-356.13941108 510.15359381 -356.13036559 505.43164174 -356.14030457 500.70793152 C-356.17792832 492.79118557 -356.31566363 484.88155087 -356.52368164 476.9675293 C-356.78993872 466.82072467 -356.89300191 456.67910115 -356.94402027 446.52919483 C-356.98885248 437.77365666 -357.10296602 429.01922711 -357.23086715 420.26455855 C-357.26945515 417.46255678 -357.29955288 414.66055058 -357.32889748 411.85843849 C-357.37985417 407.45652322 -357.47394527 403.05746879 -357.60121727 398.65711975 C-357.64204487 397.04616169 -357.66969304 395.43480578 -357.6829834 393.82338524 C-357.51838416 385.18215035 -357.51838416 385.18215035 -360.86847496 377.51852989 C-363.01117765 375.59169299 -363.01117765 375.59169299 -365.2969923 374.15680981 C-365.85898484 373.77506257 -366.42097738 373.39331533 -367 373 C-367 372.34 -367 371.68 -367 371 C-365.99785461 370.99120064 -365.99785461 370.99120064 -364.97546387 370.98222351 C-320.3726377 370.91973903 -320.3726377 370.91973903 -276 367 C-274.77909668 366.82984375 -273.55819336 366.6596875 -272.30029297 366.484375 C-234.22460856 360.96544572 -194.4202649 349.58797833 -164 325 C-163.3930127 324.50967285 -162.78602539 324.0193457 -162.16064453 323.51416016 C-160.26032984 321.96227704 -158.37611721 320.39353378 -156.5 318.8125 C-155.93595459 318.33748047 -155.37190918 317.86246094 -154.79077148 317.37304688 C-153.69874797 316.42700709 -152.62510429 315.45933774 -151.57080078 314.47143555 C-150 313 -150 313 -148.36279297 311.71020508 C-141.90173325 305.80592792 -142.0791769 296.25197562 -141.125 288.0625 C-140.91374128 286.40791004 -140.70022049 284.75360723 -140.484375 283.09960938 C-139.96338919 279.0692518 -139.4733541 275.03621736 -139 271 C-139.57790283 272.18843506 -139.57790283 272.18843506 -140.16748047 273.40087891 C-148.25709213 289.84348493 -159.47454674 305.58526087 -174 317 C-174.90621094 317.75410156 -175.81242187 318.50820313 -176.74609375 319.28515625 C-215.69777058 351.11784168 -271.31582317 360.06222131 -320.17700195 360.17358398 C-321.42472382 360.180271 -322.67244568 360.18695801 -323.95797729 360.19384766 C-326.64781728 360.20780778 -329.33760689 360.22015412 -332.0274601 360.22979546 C-336.31775816 360.24550312 -340.60798793 360.26945714 -344.89823914 360.29469299 C-357.0908876 360.36519845 -369.28357637 360.42505193 -381.47631836 360.47680664 C-388.22975813 360.50554586 -394.98313086 360.54115366 -401.73649949 360.58346039 C-405.28531048 360.60536986 -408.83406219 360.62407968 -412.38292885 360.63390923 C-432.33755205 360.69125293 -452.10488134 361.55890767 -472 363 C-473.34636413 363.09615195 -474.69274205 363.19211094 -476.03913307 363.28788567 C-479.35949399 363.52426698 -482.67977609 363.76170353 -486 364 C-482.92762917 360.6097977 -479.6845726 358.00661457 -475.9375 355.375 C-470.48727292 351.4935545 -465.68212568 347.19283608 -460.82421875 342.61328125 C-458.87080188 340.80576273 -456.93435998 339.10031372 -454.87890625 337.421875 C-452.43561292 335.36645863 -450.33509852 333.34301503 -448.25 330.9375 C-447.67765625 330.28652344 -447.1053125 329.63554687 -446.515625 328.96484375 C-445.03901099 327.05057353 -443.99760764 325.19571486 -443 323 C-443.99 321.515 -443.99 321.515 -445 320 C-448.80881477 321.38877362 -451.97938448 323.17017568 -455.375 325.375 C-481.70499243 341.93130549 -511.11053276 354.43715627 -542 359 C-542.6283374 359.0935376 -543.2566748 359.1870752 -543.90405273 359.28344727 C-551.46351956 360.27279438 -559.07553599 360.28333209 -566.6875 360.3125 C-567.41222504 360.31611542 -568.13695007 360.31973083 -568.88363647 360.32345581 C-583.02959858 360.35171928 -596.28264702 358.44802543 -610 355 C-615.65729176 336.22260608 -618.10267265 317.05308274 -619.6875 297.5625 C-619.74825714 296.82545837 -619.80901428 296.08841675 -619.87161255 295.32904053 C-621.6039135 273.92358009 -622.20210125 252.46638631 -622.24023438 230.99584961 C-622.25004925 227.6708167 -622.28130552 224.34637683 -622.3125 221.02148438 C-622.44345477 194.45985926 -619.72783571 166.44573324 -600.3515625 146.32421875 C-599.18753906 145.17373047 -599.18753906 145.17373047 -598 144 C-597.28585937 143.26394531 -596.57171875 142.52789062 -595.8359375 141.76953125 C-559.03438473 106.04293793 -496.56486412 97.97507264 -447.5625 96.0625 C-431.52394481 95.41884653 -416.54618679 93.17385349 -401 89 C-399.76233887 88.67612305 -398.52467773 88.35224609 -397.24951172 88.01855469 C-372.38247395 81.47192557 -348.90467184 72.05632712 -325.3605957 61.76904297 C-314.0165054 56.87828097 -302.45311566 52.61469512 -290.86535645 48.34075928 C-281.27038531 44.79830833 -271.76599632 41.22557277 -262.5 36.875 C-225.87466442 19.68989697 -180.32042359 19.72103982 -141.75732422 30.46166992 C-134.07272765 32.5407271 -128.81514299 31.62789017 -121.625 28.125 C-89.03945663 13.17111349 -53.32546429 5.78032956 -18 1 C-17.14212891 0.88366211 -16.28425781 0.76732422 -15.40039062 0.64746094 C-10.23916591 0.00732632 -5.20045205 -0.08254686 0 0 Z M-73 23 C-73.92200195 23.24508301 -74.84400391 23.49016602 -75.79394531 23.74267578 C-96.49174527 29.31000412 -111.27457877 37.8524081 -126.5 53.1875 C-127.32806152 54.02120117 -128.15612305 54.85490234 -129.00927734 55.71386719 C-141.70654642 68.66333374 -153.1528602 83.62213696 -159 101 C-157.23361856 102.48448016 -155.46173862 103.96241965 -153.6875 105.4375 C-152.70136719 106.26121094 -151.71523438 107.08492188 -150.69921875 107.93359375 C-148.11899855 110.14121576 -148.11899855 110.14121576 -145 111 C-144.5153125 109.97261719 -144.030625 108.94523437 -143.53125 107.88671875 C-137.34388501 95.00040426 -129.83783788 84.41553475 -120 74 C-119.32582031 73.26136719 -118.65164063 72.52273437 -117.95703125 71.76171875 C-107.18221979 60.38044511 -93.83437826 52.14384661 -80 45 C-79.33274902 44.65340332 -78.66549805 44.30680664 -77.97802734 43.94970703 C-63.30429385 36.43096368 -47.76139745 31.6774271 -32 27 C-39.55245903 60.32043994 -51.91553488 94.12337641 -75 120 C-75.82886719 120.97195312 -76.65773438 121.94390625 -77.51171875 122.9453125 C-89.67479067 136.97737716 -104.88557316 147.8165752 -122 155 C-120.49292219 158.36194281 -118.56248436 161.00157205 -116.1875 163.8125 C-115.52105469 164.62332031 -114.85460937 165.43414062 -114.16796875 166.26953125 C-112.16192753 168.24986689 -112.16192753 168.24986689 -109.6953125 167.94921875 C-80.63122347 157.71360479 -49.9641447 138.39683648 -35.9765625 110.09472656 C-22.5524966 81.3001052 -12.8068919 44.88249977 -14 13 C-33.60117232 12.61769168 -54.22108032 17.91417561 -73 23 Z M-357 143 C-351.99851275 153.42720779 -342.44835054 159.46354728 -332.0625 163.93359375 C-323.96361051 166.75374277 -314.60257876 169.07532235 -306 168 C-304.9275 167.86851562 -303.855 167.73703125 -302.75 167.6015625 C-288.01453831 165.23774885 -273.6038449 158.81805707 -264.26953125 146.765625 C-263.64111328 145.89164063 -263.64111328 145.89164063 -263 145 C-267.38227006 134.91164914 -277.77892099 128.63333468 -287.48828125 124.5234375 C-313.71449432 114.64695064 -338.45234198 123.00393484 -357 143 Z M-578 217 C-578.82371094 217.67804688 -579.64742187 218.35609375 -580.49609375 219.0546875 C-586.65785971 224.32548274 -591.75509069 230.06348618 -596 237 C-596 237.66 -596 238.32 -596 239 C-573.55319976 240.68001 -550.11183033 228.05027982 -533.36328125 214.0703125 C-532.19345703 213.04550781 -532.19345703 213.04550781 -531 212 C-530.14792969 211.25492188 -529.29585937 210.50984375 -528.41796875 209.7421875 C-523.27474133 205.17082861 -523.27474133 205.17082861 -520.9375 198.9375 C-520.958125 197.968125 -520.97875 196.99875 -521 196 C-536.55329601 186.17686568 -566.19743246 207.05004006 -578 217 Z M-333 540 C-333 543.63 -333 547.26 -333 551 C-238.62 551 -144.24 551 -47 551 C-47 547.37 -47 543.74 -47 540 C-141.38 540 -235.76 540 -333 540 Z M-379 598 C-379 598.33 -379 598.66 -379 599 C-254.26 599 -129.52 599 -1 599 C-2.65 597.68 -4.3 596.36 -6 595 C-6.87163042 594.28770408 -7.74326085 593.57540816 -8.64130431 592.84152752 C-26.23379747 578.74973033 -40.21554088 573.11084484 -63.14350164 573.47225416 C-66.88604078 573.50988962 -70.62691267 573.43611943 -74.36897278 573.37840271 C-81.6591755 573.28343194 -88.94574893 573.28910127 -96.2362987 573.33416783 C-102.17532214 573.36920211 -108.11331942 573.36738912 -114.0523777 573.34068489 C-114.90496883 573.33690729 -115.75755997 573.3331297 -116.6359872 573.32923763 C-118.3692994 573.32144409 -120.10261131 573.31358689 -121.83592293 573.30566681 C-138.009226 573.23632352 -154.18051779 573.28469234 -170.35361914 573.37322611 C-184.1530168 573.44577348 -197.94872845 573.41007532 -211.74780273 573.29663086 C-227.86430386 573.16414619 -243.9785306 573.10574585 -260.09556705 573.15731674 C-261.82322552 573.16261285 -263.55088433 573.16779733 -265.27854347 573.17286873 C-266.55279234 573.17663238 -266.55279234 573.17663238 -267.85278362 573.18047206 C-273.7644109 573.19287356 -279.6743208 573.15352267 -285.58560753 573.09319878 C-336.85861808 571.64547874 -336.85861808 571.64547874 -379 598 Z "
      fill={color.fill}
      transform="translate(798,93) rotate(180)"
       stroke = "black"
      stroke-width={5}/>
      {if color.dark
      <path d="M0 0 C-3.54232072 40.07277889 -8.34339667 91.30368641 -31.13793945 125.71801758 C-33.22036207 128.89222148 -34.0369361 130.59089765 -33.69140625 134.41796875 C-33.13259766 136.28388672 -33.13259766 136.28388672 -32.5625 138.1875 C-32.15239329 139.68148443 -31.75066519 141.17778366 -31.35546875 142.67578125 C-31.1342334 143.50932129 -30.91299805 144.34286133 -30.68505859 145.20166016 C-26.70690448 161.45169665 -24.22229719 178.31939292 -23 195 C-22.91069654 196.00482548 -22.82139309 197.00965096 -22.72938347 198.04492569 C-21.67438335 211.97976322 -22.09788385 225.90979517 -22.38212395 239.86646843 C-22.5515506 248.20001789 -22.6931818 256.53408294 -22.83718872 264.86810303 C-22.85260638 265.74962471 -22.86802404 266.63114639 -22.8839089 267.53938085 C-23.12628192 281.46478751 -23.30636278 295.39010734 -23.44137573 309.31695557 C-23.45058151 310.26332436 -23.45978729 311.20969316 -23.46927203 312.1847398 C-23.5634105 321.95713056 -23.64977946 331.72957587 -23.72990949 341.50209104 C-23.77130491 346.51003616 -23.81471997 351.51796184 -23.859375 356.52587891 C-23.86822924 357.52247679 -23.87708347 358.51907466 -23.88620602 359.54587248 C-24.03390856 375.67197273 -24.3306661 391.79209772 -24.68162932 407.91490588 C-25.03982338 424.5301606 -25.23175138 441.14157415 -25.2741679 457.76065755 C-25.30265517 467.0704846 -25.40584255 476.36650557 -25.7010231 485.67201996 C-28.67764054 523.05758758 -28.67764054 523.05758758 -16.82649994 556.87861633 C-7.40634967 566.60624716 4.39530301 572.4628823 16.73367691 577.64160919 C23.90855359 580.70915182 30.13543348 585.04188609 36.45492339 589.56698561 C39.09674232 591.43834276 41.80207688 593.20690691 44.5078125 594.984375 C48.87800783 597.87800783 48.87800783 597.87800783 50 599 C50 623.09 50 647.18 50 672 C-108.4 672 -266.8 672 -430 672 C-430 647.58 -430 623.16 -430 598 C-415.76024498 585.38138632 -408.30684143 578.84245774 -392.29699707 571.83821106 C-391.27936783 571.37907633 -390.26173859 570.9199416 -389.21327209 570.44689369 C-386.99929588 569.44996965 -384.77713186 568.47109789 -382.54856873 567.50722313 C-368.09563599 560.95515588 -368.09563599 560.95515588 -358.1324389 549.11795092 C-354.58750302 538.27931644 -355.60064964 526.10277702 -355.99891114 514.87555528 C-356.13941108 510.15359381 -356.13036559 505.43164174 -356.14030457 500.70793152 C-356.17792832 492.79118557 -356.31566363 484.88155087 -356.52368164 476.9675293 C-356.78993872 466.82072467 -356.89300191 456.67910115 -356.94402027 446.52919483 C-356.98885248 437.77365666 -357.10296602 429.01922711 -357.23086715 420.26455855 C-357.26945515 417.46255678 -357.29955288 414.66055058 -357.32889748 411.85843849 C-357.37985417 407.45652322 -357.47394527 403.05746879 -357.60121727 398.65711975 C-357.64204487 397.04616169 -357.66969304 395.43480578 -357.6829834 393.82338524 C-357.51838416 385.18215035 -357.51838416 385.18215035 -360.86847496 377.51852989 C-363.01117765 375.59169299 -363.01117765 375.59169299 -365.2969923 374.15680981 C-365.85898484 373.77506257 -366.42097738 373.39331533 -367 373 C-367 372.34 -367 371.68 -367 371 C-365.99785461 370.99120064 -365.99785461 370.99120064 -364.97546387 370.98222351 C-320.3726377 370.91973903 -320.3726377 370.91973903 -276 367 C-274.77909668 366.82984375 -273.55819336 366.6596875 -272.30029297 366.484375 C-234.22460856 360.96544572 -194.4202649 349.58797833 -164 325 C-163.3930127 324.50967285 -162.78602539 324.0193457 -162.16064453 323.51416016 C-160.26032984 321.96227704 -158.37611721 320.39353378 -156.5 318.8125 C-155.93595459 318.33748047 -155.37190918 317.86246094 -154.79077148 317.37304688 C-153.69874797 316.42700709 -152.62510429 315.45933774 -151.57080078 314.47143555 C-150 313 -150 313 -148.36279297 311.71020508 C-141.90173325 305.80592792 -142.0791769 296.25197562 -141.125 288.0625 C-140.91374128 286.40791004 -140.70022049 284.75360723 -140.484375 283.09960938 C-139.96338919 279.0692518 -139.4733541 275.03621736 -139 271 C-139.57790283 272.18843506 -139.57790283 272.18843506 -140.16748047 273.40087891 C-148.25709213 289.84348493 -159.47454674 305.58526087 -174 317 C-174.90621094 317.75410156 -175.81242187 318.50820313 -176.74609375 319.28515625 C-215.69777058 351.11784168 -271.31582317 360.06222131 -320.17700195 360.17358398 C-321.42472382 360.180271 -322.67244568 360.18695801 -323.95797729 360.19384766 C-326.64781728 360.20780778 -329.33760689 360.22015412 -332.0274601 360.22979546 C-336.31775816 360.24550312 -340.60798793 360.26945714 -344.89823914 360.29469299 C-357.0908876 360.36519845 -369.28357637 360.42505193 -381.47631836 360.47680664 C-388.22975813 360.50554586 -394.98313086 360.54115366 -401.73649949 360.58346039 C-405.28531048 360.60536986 -408.83406219 360.62407968 -412.38292885 360.63390923 C-432.33755205 360.69125293 -452.10488134 361.55890767 -472 363 C-473.34636413 363.09615195 -474.69274205 363.19211094 -476.03913307 363.28788567 C-479.35949399 363.52426698 -482.67977609 363.76170353 -486 364 C-482.92762917 360.6097977 -479.6845726 358.00661457 -475.9375 355.375 C-470.48727292 351.4935545 -465.68212568 347.19283608 -460.82421875 342.61328125 C-458.87080188 340.80576273 -456.93435998 339.10031372 -454.87890625 337.421875 C-452.43561292 335.36645863 -450.33509852 333.34301503 -448.25 330.9375 C-447.67765625 330.28652344 -447.1053125 329.63554687 -446.515625 328.96484375 C-445.03901099 327.05057353 -443.99760764 325.19571486 -443 323 C-443.99 321.515 -443.99 321.515 -445 320 C-448.80881477 321.38877362 -451.97938448 323.17017568 -455.375 325.375 C-481.70499243 341.93130549 -511.11053276 354.43715627 -542 359 C-542.6283374 359.0935376 -543.2566748 359.1870752 -543.90405273 359.28344727 C-551.46351956 360.27279438 -559.07553599 360.28333209 -566.6875 360.3125 C-567.41222504 360.31611542 -568.13695007 360.31973083 -568.88363647 360.32345581 C-583.02959858 360.35171928 -596.28264702 358.44802543 -610 355 C-615.65729176 336.22260608 -618.10267265 317.05308274 -619.6875 297.5625 C-619.74825714 296.82545837 -619.80901428 296.08841675 -619.87161255 295.32904053 C-621.6039135 273.92358009 -622.20210125 252.46638631 -622.24023438 230.99584961 C-622.25004925 227.6708167 -622.28130552 224.34637683 -622.3125 221.02148438 C-622.44345477 194.45985926 -619.72783571 166.44573324 -600.3515625 146.32421875 C-599.18753906 145.17373047 -599.18753906 145.17373047 -598 144 C-597.28585937 143.26394531 -596.57171875 142.52789062 -595.8359375 141.76953125 C-559.03438473 106.04293793 -496.56486412 97.97507264 -447.5625 96.0625 C-431.52394481 95.41884653 -416.54618679 93.17385349 -401 89 C-399.76233887 88.67612305 -398.52467773 88.35224609 -397.24951172 88.01855469 C-372.38247395 81.47192557 -348.90467184 72.05632712 -325.3605957 61.76904297 C-314.0165054 56.87828097 -302.45311566 52.61469512 -290.86535645 48.34075928 C-281.27038531 44.79830833 -271.76599632 41.22557277 -262.5 36.875 C-225.87466442 19.68989697 -180.32042359 19.72103982 -141.75732422 30.46166992 C-134.07272765 32.5407271 -128.81514299 31.62789017 -121.625 28.125 C-89.03945663 13.17111349 -53.32546429 5.78032956 -18 1 C-17.14212891 0.88366211 -16.28425781 0.76732422 -15.40039062 0.64746094 C-10.23916591 0.00732632 -5.20045205 -0.08254686 0 0 Z M-73 23 C-73.92200195 23.24508301 -74.84400391 23.49016602 -75.79394531 23.74267578 C-96.49174527 29.31000412 -111.27457877 37.8524081 -126.5 53.1875 C-127.32806152 54.02120117 -128.15612305 54.85490234 -129.00927734 55.71386719 C-141.70654642 68.66333374 -153.1528602 83.62213696 -159 101 C-157.23361856 102.48448016 -155.46173862 103.96241965 -153.6875 105.4375 C-152.70136719 106.26121094 -151.71523438 107.08492188 -150.69921875 107.93359375 C-148.11899855 110.14121576 -148.11899855 110.14121576 -145 111 C-144.5153125 109.97261719 -144.030625 108.94523437 -143.53125 107.88671875 C-137.34388501 95.00040426 -129.83783788 84.41553475 -120 74 C-119.32582031 73.26136719 -118.65164063 72.52273437 -117.95703125 71.76171875 C-107.18221979 60.38044511 -93.83437826 52.14384661 -80 45 C-79.33274902 44.65340332 -78.66549805 44.30680664 -77.97802734 43.94970703 C-63.30429385 36.43096368 -47.76139745 31.6774271 -32 27 C-39.55245903 60.32043994 -51.91553488 94.12337641 -75 120 C-75.82886719 120.97195312 -76.65773438 121.94390625 -77.51171875 122.9453125 C-89.67479067 136.97737716 -104.88557316 147.8165752 -122 155 C-120.49292219 158.36194281 -118.56248436 161.00157205 -116.1875 163.8125 C-115.52105469 164.62332031 -114.85460937 165.43414062 -114.16796875 166.26953125 C-112.16192753 168.24986689 -112.16192753 168.24986689 -109.6953125 167.94921875 C-80.63122347 157.71360479 -49.9641447 138.39683648 -35.9765625 110.09472656 C-22.5524966 81.3001052 -12.8068919 44.88249977 -14 13 C-33.60117232 12.61769168 -54.22108032 17.91417561 -73 23 Z M-357 143 C-351.99851275 153.42720779 -342.44835054 159.46354728 -332.0625 163.93359375 C-323.96361051 166.75374277 -314.60257876 169.07532235 -306 168 C-304.9275 167.86851562 -303.855 167.73703125 -302.75 167.6015625 C-288.01453831 165.23774885 -273.6038449 158.81805707 -264.26953125 146.765625 C-263.64111328 145.89164063 -263.64111328 145.89164063 -263 145 C-267.38227006 134.91164914 -277.77892099 128.63333468 -287.48828125 124.5234375 C-313.71449432 114.64695064 -338.45234198 123.00393484 -357 143 Z M-578 217 C-578.82371094 217.67804688 -579.64742187 218.35609375 -580.49609375 219.0546875 C-586.65785971 224.32548274 -591.75509069 230.06348618 -596 237 C-596 237.66 -596 238.32 -596 239 C-573.55319976 240.68001 -550.11183033 228.05027982 -533.36328125 214.0703125 C-532.19345703 213.04550781 -532.19345703 213.04550781 -531 212 C-530.14792969 211.25492188 -529.29585937 210.50984375 -528.41796875 209.7421875 C-523.27474133 205.17082861 -523.27474133 205.17082861 -520.9375 198.9375 C-520.958125 197.968125 -520.97875 196.99875 -521 196 C-536.55329601 186.17686568 -566.19743246 207.05004006 -578 217 Z M-333 540 C-333 543.63 -333 547.26 -333 551 C-238.62 551 -144.24 551 -47 551 C-47 547.37 -47 543.74 -47 540 C-141.38 540 -235.76 540 -333 540 Z M-379 598 C-379 598.33 -379 598.66 -379 599 C-254.26 599 -129.52 599 -1 599 C-2.65 597.68 -4.3 596.36 -6 595 C-6.87163042 594.28770408 -7.74326085 593.57540816 -8.64130431 592.84152752 C-26.23379747 578.74973033 -40.21554088 573.11084484 -63.14350164 573.47225416 C-66.88604078 573.50988962 -70.62691267 573.43611943 -74.36897278 573.37840271 C-81.6591755 573.28343194 -88.94574893 573.28910127 -96.2362987 573.33416783 C-102.17532214 573.36920211 -108.11331942 573.36738912 -114.0523777 573.34068489 C-114.90496883 573.33690729 -115.75755997 573.3331297 -116.6359872 573.32923763 C-118.3692994 573.32144409 -120.10261131 573.31358689 -121.83592293 573.30566681 C-138.009226 573.23632352 -154.18051779 573.28469234 -170.35361914 573.37322611 C-184.1530168 573.44577348 -197.94872845 573.41007532 -211.74780273 573.29663086 C-227.86430386 573.16414619 -243.9785306 573.10574585 -260.09556705 573.15731674 C-261.82322552 573.16261285 -263.55088433 573.16779733 -265.27854347 573.17286873 C-266.55279234 573.17663238 -266.55279234 573.17663238 -267.85278362 573.18047206 C-273.7644109 573.19287356 -279.6743208 573.15352267 -285.58560753 573.09319878 C-336.85861808 571.64547874 -336.85861808 571.64547874 -379 598 Z "
      fill={color.fill}
      transform="translate(798,93) rotate(180)"/>

      }
    </g>
  #Zebra
  z: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_ndl45.svg and https://commons.wikimedia.org/wiki/File:Chess_nll45.svg by Cburnett
    <g
      fill-rule="evenodd"
      stroke-width="1.5"
      stroke-linecap="round"
      stroke-linejoin="miter"
      stroke-miterlimit="4"
      transform="translate(22,22) scale(0.8889) translate(-22.5, -22.5)"
      fill={color.fill}
      stroke="black"
    >
    #Base off color
      <path d="m 22,10 c 10.5,1 16.5,8 16,29 H 15 c 0,-9 10,-6.5 8,-21"
            style="fill:#2b2b3c;fill-opacity:1;fill-rule:evenodd;stroke:#303042;stroke-width:1px;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="m 24,18 c 0.384461,2.911278 -5.552936,7.368624 -8,9 -3,2 -2.819198,4.342892 -5,4 -1.04172,-0.944016 1.413429,-3.037549 0,-3 -1,0 0.187332,1.231727 -1,2 -1,0 -4.0031608,0.999999 -4,-4 0,-2 6,-12 6,-12 0,0 1.885866,-1.902129 2,-3.5 -0.726047,-0.994369 -0.5,-2 -0.5,-3 1,-1 3,2.5 3,2.5 h 2 c 0,0 0.781781,-1.9919255 2.5,-3 1,0 1,3 1,3"
         style="fill:#2b2b3c;fill-opacity:1;fill-rule:evenodd;stroke:#303042;stroke-width:1px;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1"/>
    #Base black and white
      <path d="m 14.567771,38.459879 c 0.13635,-1.796208 0.558844,-3.152428 1.384569,-4.444516 0.233128,-0.364797 1.312337,-1.579372 2.398243,-2.699058 1.994197,-2.056232 2.893864,-3.226759 3.454584,-4.494646 0.446573,-1.009784 0.799401,-2.508009 0.890245,-3.78028 l 0.07945,-1.11275 -1.108514,1.075131 c -1.509002,1.46356 -2.57691,2.350841 -4.421012,3.673239 -1.700047,1.219096 -2.544384,2.006507 -3.665008,3.417912 -0.775227,0.976384 -1.421866,1.388405 -2.18696,1.393473 -0.575285,0.0038 -0.855457,-0.176834 -1.012077,-0.652545 l -0.134066,-0.40721 -1.0319639,0.04174 C 7.9615845,30.521081 7.3792222,30.361435 6.7525106,29.795239 6.1336101,29.236099 5.7610606,28.34997 5.6181745,27.09716 5.478446,25.872035 5.5914562,25.271009 6.2522413,23.724978 7.4052529,21.02729 11.111158,14.365763 12.223638,12.991129 c 0.361652,-0.446875 0.803261,-1.12024 0.981352,-1.496367 0.321358,-0.678706 0.322164,-0.68814 0.106827,-1.25 -0.119336,-0.3113731 -0.24652,-1.0767335 -0.28263,-1.7008009 -0.06502,-1.1237006 -0.06232,-1.137293 0.279605,-1.40625 0.189893,-0.1493702 0.502052,-0.2715821 0.693686,-0.2715821 0.498896,0 1.319417,0.6731881 2.100897,1.7236592 l 0.670536,0.9013408 h 0.733173 0.733173 l 0.270503,-0.53125 c 0.148777,-0.2921875 0.677944,-0.9390625 1.175928,-1.4375 0.781557,-0.7822703 0.965687,-0.90625 1.345925,-0.90625 0.33503,0 0.515317,0.088914 0.752972,0.3713508 0.304723,0.3621418 0.58282,1.3000334 0.586667,1.9785518 0.0029,0.5080395 0.12709,0.6173638 0.810586,0.7134464 6.88235,0.967487 11.352047,4.976401 13.517699,12.124151 1.123152,3.706976 1.627873,7.687946 1.755158,13.84375 l 0.07948,3.84375 h -0.500364 -0.500362 l 0.06018,-3.126764 C 37.71967,29.867039 37.027323,24.699753 35.44664,20.333049 33.737003,15.6101 30.713269,12.258466 26.998148,10.968382 c -0.532334,-0.184853 -2.215573,-0.602253 -2.428696,-0.602253 -0.08352,0 -0.32899,1.015984 -0.268939,1.113148 0.03671,0.0594 0.33074,0.147593 0.653394,0.195978 2.43577,0.365266 5.129133,1.935823 6.703427,3.90891 3.061731,3.837315 4.212184,8.694398 4.211846,17.781964 -7.5e-5,2.028125 -0.03645,4.235937 -0.08084,4.90625 l -0.08071,1.21875 H 25.098558 14.489486 l 0.07828,-1.03125 z M 9.6885199,26.18431 c 0.6200241,-0.620024 0.1806775,-1.693181 -0.6931819,-1.693181 -0.5138873,0 -1,0.486112 -1,1 0,0.513887 0.4861127,1 1,1 0.2435466,0 0.4997771,-0.113414 0.6931819,-0.306819 z m 4.6625311,-9.016105 c 0.720688,-0.42992 1.519287,-1.842801 1.519287,-2.687922 0,-0.482012 -0.458393,-0.901188 -0.873776,-0.799022 -0.470815,0.115799 -1.090962,0.77835 -1.506066,1.609047 -0.434872,0.870256 -0.474443,1.471536 -0.120158,1.825821 0.301661,0.301661 0.54102,0.314371 0.980713,0.05208 z"
         style="fill:#000000"/>
       <path d="m 24.55,10.4 -0.3,1.1 0.55,0.1 c 3.101459,0.477147 6.323526,2.234204 8.575,6.49375 C 35.626474,22.353296 36.297157,29.05687 35.8,39 l -0.05,0.5 H 37.5 V 39 C 38.002843,28.94313 36.623526,22.146704 34.25,17.65625 31.876474,13.165796 28.461041,11.022853 25.0625,10.5 Z"
         style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
      #Eyes
      <ellipse
         transform="rotate(30.000012,14.500009,15.499986)"
         id="path3501"
         style="opacity:1;fill:#2b2b3c;fill-opacity:1;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         cx="14.5"
         cy="15.5"
         rx="0.5"
         ry="1.5" />
      #Nose
        <circle
         transform="translate(0.5,2)"
         id="path3499"
         style="opacity:1;fill:#2b2b3c;fill-opacity:1;stroke:#ffffff;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         cx="8.5"
         cy="23.5"
         r="0.5" />

      #Stripes
      <path id="path3787"
         d="m 20,38 c 5,-5 11.375,-5.625 16.375,-6.625 l 0.125,0.75 C 31.5,33.125 25.75,34 21.75,38 Z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="m 36.25,28.5 c -5.54684,0.614372 -12.711319,1.059578 -18.25,5.25 2.125,-2.625 2.823017,-2.541667 3.625,-3.875 4,-1 9.188096,-2.067905 14.375,-2.875 z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="M 23.75,25.75 C 29.759822,24.806647 31.895381,23.766153 35,23 v -1 c -3.365763,0.834839 -6.665102,2.155386 -11,2.5 z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="M 36.5,35.625 C 32.65337,35.962561 30.888877,36.495727 28.625,38 l 3.125,-0.125 c 2.22881,-1.603573 3.356592,-1.372098 4.625,-1.375 z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="m 33.125,17.75 c -1.651212,1.497849 -5.120762,2.268362 -8.375,3.125 l 0.125,-0.75 c 2.192276,-0.757978 2.842349,0.156524 7.5,-3.375 z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="m 25.125,11.25 -1.75,2.25 0.375,-2.625 z"
         style="fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path d="m 30,13.375 c -2.647892,2.504117 -2.719417,2.4805 -5.25,3.375 1.857607,-1.621366 2.685484,-2.344089 3.875,-4.75 z"
        style = "fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
    </g>
  p: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_pdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_pll45.svg by Cburnett
    <path
      d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z"
      fill={color.fill} stroke="#000" fill-rule="nonzero"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter"
      stroke-miterlimit="4" />
  f: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_pdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_pll45.svg by Cburnett
    <path
      d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z"
      fill={color.fill} stroke="#000" fill-rule="nonzero"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter"
      stroke-miterlimit="4"
      transform="rotate(180 22 22)"/>
  q: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_qdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_qll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4">
      {if color.dark
        <g fill={color.fill} stroke="none">
          <circle cx="6"    cy="12" r="2.75" />
          <circle cx="14"   cy="9"  r="2.75" />
          <circle cx="22.5" cy="8"  r="2.75" />
          <circle cx="31"   cy="9"  r="2.75" />
          <circle cx="39"   cy="12" r="2.75" />
        </g>
      else
        <g fill={color.fill} stroke="#000">
          <path
            d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"
            transform="translate(-1,-1)" />
          <path
            d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"
            transform="translate(15.5,-5.5)" />
          <path
            d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"
            transform="translate(32,-1)" />
          <path
            d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"
            transform="translate(7,-4.5)" />
          <path
            d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"
            transform="translate(24,-4)" />
        </g>
      }
      <path
        d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"
        stroke-linecap="butt" stroke="#000" fill={color.fill} />
      <path
        d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"
        stroke-linecap="butt" stroke="#000" fill={color.fill} />
      {if color.dark
        <g fill="none">
          <path
            d="M 11,38.5 A 35,35 1 0 0 34,38.5"
            stroke="#000" stroke-linecap="butt" />
          <path
            d="M 11,29 A 35,35 1 0 1 34,29 M 12.5,31.5 L 32.5,31.5 M 11.5,34.5 A 35,35 1 0 0 33.5,34.5 M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"
            stroke={color.stroke} />
        </g>
      else
        <path
          d="M 11.5,30 C 15,29 30,29 33.5,30 M 12,33.5 C 18,32.5 27,32.5 33,33.5"
          fill="none" stroke="#000" />
      }
    </g>
  w: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_rdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_rll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4" fill={color.fill} stroke="#000" transform="rotate(180 22 22)">
      <path
        d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z"
        stroke-linecap="butt" />
      {if color.dark
        <path
          d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z"
          stroke-linecap="butt" />
      }
      <path
        d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z"
        stroke-linecap="butt" />
      {if color.dark
        <>
          <path
            d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z"
            stroke-linecap="butt" stroke-linejoin="miter" />
          <path
            d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "
            stroke-linecap="butt" />
          <path
            d="M 12,35.5 L 33,35.5 L 33,35.5 M 13,31.5 L 32,31.5 M 14,29.5 L 31,29.5 M 14,16.5 L 31,16.5"
            fill="none" stroke="#fff" stroke-width="1" stroke-linejoin="miter" />
        </>
      else
        <>
          <path
            d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"
            stroke-linecap="butt" />
          <path
            d="M 34,14 L 31,17 L 14,17 L 11,14" />
          <path
            d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"
            stroke-linecap="butt" stroke-linejoin="miter" />
          <path
            d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />
        </>
      }
      <path
        d="M 11,14 L 34,14"
        fill="none" stroke={color.stroke} stroke-width={1 if color.dark} stroke-linejoin="miter" />
    </g>
  r: (color) ->
    # based on https://commons.wikimedia.org/wiki/File:Chess_rdl45.svg and https://commons.wikimedia.org/wiki/File:Chess_rll45.svg by Cburnett
    <g fill-rule="evenodd" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="miter" stroke-miterlimit="4" fill={color.fill} stroke="#000">
      <path
        d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z"
        stroke-linecap="butt" />
      {if color.dark
        <path
          d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z"
          stroke-linecap="butt" />
      }
      <path
        d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z"
        stroke-linecap="butt" />
      {if color.dark
        <>
          <path
            d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z"
            stroke-linecap="butt" stroke-linejoin="miter" />
          <path
            d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "
            stroke-linecap="butt" />
          <path
            d="M 12,35.5 L 33,35.5 L 33,35.5 M 13,31.5 L 32,31.5 M 14,29.5 L 31,29.5 M 14,16.5 L 31,16.5"
            fill="none" stroke="#fff" stroke-width="1" stroke-linejoin="miter" />
        </>
      else
        <>
          <path
            d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"
            stroke-linecap="butt" />
          <path
            d="M 34,14 L 31,17 L 14,17 L 11,14" />
          <path
            d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"
            stroke-linecap="butt" stroke-linejoin="miter" />
          <path
            d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />
        </>
      }
      <path
        d="M 11,14 L 34,14"
        fill="none" stroke={color.stroke} stroke-width={1 if color.dark} stroke-linejoin="miter" />
    </g>
  '|': null  # for lines to infinity
pieces.v = pieces.p  # vertex pawns
pieces.s = pieces.q  # special queen

## Hashed backgrounds:
#backgrounds =
#  dark:
#    <path class="bg" stroke="#000" d="M 7.5,0 L 0,7.5 M 15,0 L 0,15 M 22.5,0 L 0,22.5 M 30,0 L 0,30 M 37.5,0 L 0,37.5 M 45,0 L 0,45 M 45,7.5 L 7.5,45 M 45,15 L 15,45 M 45,22.5 L 22.5,45 M 45,30 L 30,45 M 45,37.5 L 37.5,45"/>
#  light: null

## Wikipedia orange backgrounds:
#backgrounds =
#  dark:
#    <rect width={size} height={size} fill="#ffce9e"/>
#  light:
#    <rect width={size} height={size} fill="#d18b47"/>

## Grayscale backgrounds:
backgrounds =
  dark:
    <rect width={size} height={size} fill="#eee"/>
  light:
    <rect width={size} height={size} fill="#ccc"/>

graphs = []
graphColors = [
  colors.graph.fill
  'hsl(0,65%,50%)'
  'hsl(200,65%,50%)'
]

longMove = (dx, dy) ->
  x = dx
  y = dy
  while (neighbor = @neighbor x, y).key?
    return [x, y] if neighbor.key.toLowerCase() of pieces
    x += dx
    y += dy
  null

drawGraph = ->
  return null unless @key.toLowerCase() of pieces and graphs.length
  edges1 = []
  edges2 = []
  for graph, graphIndex in graphs[..]
    color = graphColors[graphIndex % graphColors.length]
    switch graph
      when 'k'
        neighbors = [[-1, +1], [0, +1], [+1, 0], [+1, +1]]
      when 'f' #ferz
        neighbors = [[-1, +1], [+1, +1]]
      when 'w' #wazir
        neighbors = [[0, +1], [+1, 0]]
      when 'n'
        neighbors = [[-2, +1], [-1, +2], [+1, +2], [+2, +1]]
      when 'c' #camel
        neighbors = [[-3, +1], [-1, +3], [+1, +3], [+3, +1]]
      when 'z' #zebra
        neighbors = [[-3, +2], [-2, +3], [+2, +3], [+3, +2]]
      when 'g' #giraffe
        neighbors = [[-4, +1], [-1, +4], [+1, +4], [+4, +1]]
      when 'p'
        neighbors = [[-1, +1], [+1, +1]]
      when 'r'
        neighbors = [
          longMove.call @, +1, 0
          longMove.call @, 0, +1
        ]
      when 'b'
        neighbors = [
          longMove.call @, +1, +1
          longMove.call @, -1, +1
        ]
      when 'q'
        neighbors = [
          longMove.call @, +1, 0
          longMove.call @, 0, +1
          longMove.call @, +1, +1
          longMove.call @, -1, +1
        ]
       when 'e'
        neighbors = [
          longMove.call @, -3, +1
          longMove.call @, -1, +3
          longMove.call @, +1, +3
          longMove.call @, +3, +1
        ]
      when 's'
        neighbors = [
          longMove.call @, +1, 0
          longMove.call @, 0, +1
          longMove.call @, +1, +1
          longMove.call @, -1, +1
        ]
      else
        console.warn "Unknown piece type for graph: #{graph}"
        graphs = (g for g in graphs when g != graph)
        continue
    for neighbor in neighbors when neighbor?
      key = @neighbor(...neighbor).key?.toLowerCase()
      if key of pieces
        continue if key == '|' and @key == '|'
        coords =
          x1: size/2 + (@key == '|') * -Math.sign(neighbor[0]) * size/2
          y1: size/2 + (@key == '|') * -Math.sign(neighbor[1]) * size/2
          x2: size/2 + neighbor[0]*size +
              (key == '|') * Math.sign(neighbor[0]) * size/2
          y2: size/2 + neighbor[1]*size +
              (key == '|') * Math.sign(neighbor[1]) * size/2
        edges1.push <line {...coords} stroke="white" stroke-width="10" stroke-linecap="round" />
        edges2.push <line {...coords} stroke={color} stroke-width="7" stroke-linecap="round" />
  [
    <symbol width={size} height={size} z-index={-5}>{edges1}</symbol>
    <symbol width={size} height={size} z-index={-4}>{edges2}</symbol>
  ]

(key) ->
  ## $X draws move graph for piece X
  graphs = [] if @i == @j == 0
  if @i == 0 and @row().some (cell) -> cell.includes '$'
    if key == '$'
      graph = @neighbor(+1,0).key?.toLowerCase()
      graphs.push graph if graph
    return <symbol viewBox="0 0 0 0"/>
  piece = key.toLowerCase()
  render = pieces[piece] ? -> null

  #if key == piece
  #  color = colors.light
  #else
  #  color = colors.dark
  #if key == piece
  #  color = colors.highlight
  #else
  #  color = colors.light
  #if graphs.includes piece
  if graphs[0] == piece
    color = colors.graph
  else if piece == 'v'
    color = colors.vertex
  else if key == piece
    color = colors.special
  else
    color = colors.dark

  if (@i + @j) % 2 == 0
    background = backgrounds.light
  else
    background = backgrounds.dark
  # Don't draw background in single-piece drawings
  background = null if @drawing.keys.length == 1 and @drawing.keys[0].length == 1

  [
    <symbol width={size} height={size} z-index={-10}>{background}</symbol>
    drawGraph.call @
    <symbol width={size} height={size}>{render color}</symbol>
  ]
